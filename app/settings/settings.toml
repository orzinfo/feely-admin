# FastSoyAdmin 配置文件
# 使用 TOML 格式进行配置管理
# 环境变量前缀: FASTSOYADMIN

# 默认配置 - 所有环境的基础配置
[default]
# 应用基础配置
VERSION = "1.0.0"
APP_TITLE = "FastSoyAdmin"
APP_DESCRIPTION = "FastAPI + Vue3 + TypeScript 后台管理系统"
DEBUG = false

# 日志配置
LOGS_ROOT = "logs"

# 静态文件配置
STATIC_ROOT = "static"

# JWT 配置
SECRET_KEY = "your-secret-key-here-change-in-production"  # 生产环境请使用强密钥
JWT_ALGORITHM = "HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES = 30
JWT_REFRESH_TOKEN_EXPIRE_MINUTES = 10080  # 7天

# CORS 配置
CORS_ORIGINS = ["http://localhost:3000", "http://127.0.0.1:3000", "http://localhost:9527", "http://127.0.0.1:9527"]
CORS_ALLOW_CREDENTIALS = true
CORS_ALLOW_METHODS = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_ALLOW_HEADERS = ["*"]

# 时间格式配置
DATETIME_FORMAT = "%Y-%m-%d %H:%M:%S"

# API 日志记录配置
ADD_LOG_ORIGINS_INCLUDE = ["*"]  # 包含的路径，"*" 表示所有路径
ADD_LOG_ORIGINS_DECLUDE = ["/health", "/metrics", "/favicon.ico", "/docs", "/redoc", "/openapi.json"]  # 排除的路径

# 默认数据库配置
[default.database]
engine = "tortoise.backends.mysql"
timezone = "Asia/Shanghai"
use_tz = false
host = "localhost"
port = 3306
user = "root"
password = ""  # 默认为空密码，生产环境通过环境变量或 .secrets.toml 覆盖
database = "fastsoyadmin"
charset = "utf8mb4"
# 连接池配置
minsize = 1
maxsize = 20
connect_timeout = 30
echo = false

# 默认 Redis 配置
[default.redis]
url = "redis://localhost:6379/0"

# 开发环境配置
[development]
DEBUG = true
# 继承 default 配置，只覆盖需要修改的部分

# 开发环境使用 SQLite 数据库
[development.database]
engine = "tortoise.backends.sqlite"
database = "db.sqlite3"

# 测试环境配置
[testing]
DEBUG = false
# 测试数据库配置
[testing.database]
engine = "tortoise.backends.sqlite"
file_path = "test_app_system.sqlite3"

# 生产环境配置
[production]
DEBUG = false
# 生产环境的具体配置将通过环境变量或 .secrets.toml 覆盖